<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Hóa đơn - Highland Coffee</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @media print {
            body { margin: 0; padding: 20px; }
            .no-print { display: none !important; }
            .print-container { box-shadow: none !important; }
        }
    </style>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-md mx-auto">
        <!-- Print Button -->
        <div class="mb-4 no-print flex gap-2">
            <button onclick="window.print()" class="bg-coffee-600 hover:bg-coffee-700 text-white px-6 py-2 rounded-lg">
                <i class="fas fa-print mr-2"></i> In hóa đơn
            </button>
            <a th:href="@{/staff/dashboard}" class="bg-gray-200 hover:bg-gray-300 text-gray-700 px-6 py-2 rounded-lg">
                <i class="fas fa-arrow-left mr-2"></i> Quay lại
            </a>
        </div>

        <!-- Invoice -->
        <div class="bg-white rounded-lg shadow-lg p-6 print-container">
            <!-- Header -->
            <div class="text-center mb-6 pb-4 border-b-2 border-dashed">
                <h1 class="text-2xl font-bold text-gray-800">HIGHLAND COFFEE</h1>
                <p class="text-gray-500 text-sm">123 Đường ABC, FPT University, Hoa Lac,Ha Noi</p>
                <p class="text-gray-500 text-sm">Hotline: 1900-1234</p>
            </div>

            <!-- Invoice Info -->
            <div class="mb-4 text-sm">
                <div class="flex justify-between">
                    <span class="text-gray-500">Số hóa đơn:</span>
                    <span class="font-medium" th:text="${invoice?.invoiceNumber ?: order.orderNumber}">INV-123</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-500">Ngày:</span>
                    <span th:text="${#temporals.format(order.createdAt, 'HH:mm dd/MM/yyyy')}">Date</span>
                </div>
                <div th:if="${order.guestName != null}" class="flex justify-between">
                    <span class="text-gray-500">Khách hàng:</span>
                    <span th:text="${order.guestName}">Guest</span>
                </div>
            </div>

            <!-- Divider -->
            <div class="border-b border-dashed mb-4"></div>

            <!-- Items -->
            <table class="w-full text-sm mb-4">
                <thead>
                    <tr class="border-b">
                        <th class="text-left py-2">Sản phẩm</th>
                        <th class="text-center py-2">SL</th>
                        <th class="text-right py-2">Giá</th>
                        <th class="text-right py-2">T.Tiền</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="item : ${order.orderItems}" class="border-b border-dotted">
                        <td class="py-2" th:text="${item.productName}">Product</td>
                        <td class="text-center py-2" th:text="${item.quantity}">1</td>
                        <td class="text-right py-2" th:text="${#numbers.formatDecimal(item.unitPrice, 0, 'COMMA', 0, 'POINT')}">0</td>
                        <td class="text-right py-2" th:text="${#numbers.formatDecimal(item.totalPrice, 0, 'COMMA', 0, 'POINT')}">0</td>
                    </tr>
                </tbody>
            </table>

            <!-- Totals -->
            <div class="border-t-2 border-dashed pt-4 space-y-2 text-sm">
                <div class="flex justify-between">
                    <span>Tạm tính:</span>
                    <span th:text="${#numbers.formatDecimal(order.subtotal, 0, 'COMMA', 0, 'POINT')} + 'đ'">0đ</span>
                </div>
                <div th:if="${order.discountAmount > 0}" class="flex justify-between text-green-600">
                    <span>Giảm giá:</span>
                    <span th:text="'-' + ${#numbers.formatDecimal(order.discountAmount, 0, 'COMMA', 0, 'POINT')} + 'đ'">-0đ</span>
                </div>
                <div class="flex justify-between font-bold text-lg pt-2 border-t">
                    <span>TỔNG CỘNG:</span>
                    <span th:text="${#numbers.formatDecimal(order.totalAmount, 0, 'COMMA', 0, 'POINT')} + 'đ'">0đ</span>
                </div>
            </div>

            <!-- Payment Info -->
            <div class="mt-4 pt-4 border-t border-dashed text-sm text-center">
                <p class="text-gray-500">Phương thức: <span class="font-medium">Tiền mặt</span></p>
            </div>

            <!-- Footer -->
            <div class="mt-6 pt-4 border-t-2 border-dashed text-center text-sm text-gray-500">
                <p class="font-medium text-gray-700">Cảm ơn quý khách!</p>
                <p>Hẹn gặp lại ♥</p>
            </div>
        </div>
    </div>
</body>
</html>

