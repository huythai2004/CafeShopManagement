<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}" lang="vi">
<head>
    <title>Đơn hoàn thành - Highland Coffee</title>
</head>
<body>
<div layout:fragment="content">
    <h1 class="font-display text-3xl text-espresso mb-8">
        <i class="fas fa-check-circle mr-3 text-green-500"></i>Đơn hàng đã hoàn thành
    </h1>

    <div class="bg-white rounded-xl shadow-md overflow-hidden">
        <table class="w-full">
            <thead class="bg-green-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-green-700 uppercase">Mã đơn</th>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-green-700 uppercase">Khách hàng</th>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-green-700 uppercase">Sản phẩm</th>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-green-700 uppercase">Tổng tiền</th>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-green-700 uppercase">Hoàn thành</th>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-green-700 uppercase">Hóa đơn</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-green-100">
                <tr th:each="order : ${orders}" class="hover:bg-green-50">
                    <td class="px-6 py-4">
                        <p class="font-medium text-espresso" th:text="${order.orderNumber}">#ORDER</p>
                    </td>
                    <td class="px-6 py-4">
                        <span th:text="${order.guestName ?: order.customer?.fullName ?: 'Khách vãng lai'}">Guest</span>
                    </td>
                    <td class="px-6 py-4 text-sm">
                        <span th:text="${order.orderItems.size()} + ' sản phẩm'">0 sp</span>
                    </td>
                    <td class="px-6 py-4 font-medium text-green-600" th:text="${#numbers.formatDecimal(order.totalAmount, 0, 'COMMA', 0, 'POINT')} + 'đ'">0đ</td>
                    <td class="px-6 py-4 text-sm text-coffee-500" th:text="${#temporals.format(order.actualCompletionTime, 'HH:mm dd/MM')}">Time</td>
                    <td class="px-6 py-4">
                        <a th:href="@{/staff/order/{id}/invoice(id=${order.id})}" 
                           class="text-coffee-600 hover:text-coffee-800">
                            <i class="fas fa-file-invoice mr-1"></i> In hóa đơn
                        </a>
                    </td>
                </tr>
            </tbody>
        </table>

        <div th:if="${orders.isEmpty()}" class="p-8 text-center text-gray-500">
            <i class="fas fa-inbox text-4xl mb-3"></i>
            <p>Chưa có đơn hàng hoàn thành</p>
        </div>
    </div>
</div>
</body>
</html>

