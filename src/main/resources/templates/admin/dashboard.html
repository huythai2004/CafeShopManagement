<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}" lang="vi">
<head>
    <title>Admin Dashboard - Highland Coffee</title>
</head>
<body>
<div layout:fragment="content">
    <h1 class="font-display text-3xl text-espresso mb-8">
        <i class="fas fa-tachometer-alt mr-3"></i>Dashboard
    </h1>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="bg-white rounded-xl shadow-md p-6">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-coffee-500 text-sm">Sản phẩm</p>
                    <p class="text-3xl font-bold text-espresso" th:text="${totalProducts}">0</p>
                </div>
                <div class="w-12 h-12 bg-coffee-100 rounded-full flex items-center justify-center">
                    <i class="fas fa-mug-hot text-coffee-600 text-xl"></i>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-md p-6">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-coffee-500 text-sm">Danh mục</p>
                    <p class="text-3xl font-bold text-espresso" th:text="${totalCategories}">0</p>
                </div>
                <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                    <i class="fas fa-tags text-blue-600 text-xl"></i>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-md p-6">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-coffee-500 text-sm">Nhân viên</p>
                    <p class="text-3xl font-bold text-espresso" th:text="${totalStaff}">0</p>
                </div>
                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                    <i class="fas fa-users text-green-600 text-xl"></i>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-md p-6">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-coffee-500 text-sm">Đơn chờ xử lý</p>
                    <p class="text-3xl font-bold text-yellow-600" th:text="${pendingOrders}">0</p>
                </div>
                <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                    <i class="fas fa-clock text-yellow-600 text-xl"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Today Stats -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
        <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-md p-6 text-white">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-green-100">Doanh thu hôm nay</p>
                    <p class="text-4xl font-bold mt-2" th:text="${#numbers.formatDecimal(todayRevenue, 0, 'COMMA', 0, 'POINT')} + 'đ'">0đ</p>
                </div>
                <i class="fas fa-chart-line text-6xl text-green-400 opacity-50"></i>
            </div>
        </div>

        <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-md p-6 text-white">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-blue-100">Đơn hàng hôm nay</p>
                    <p class="text-4xl font-bold mt-2" th:text="${todayOrders}">0</p>
                </div>
                <i class="fas fa-shopping-bag text-6xl text-blue-400 opacity-50"></i>
            </div>
        </div>
    </div>

    <!-- Recent Orders -->
    <div class="bg-white rounded-xl shadow-md overflow-hidden">
        <div class="px-6 py-4 border-b border-coffee-100 flex justify-between items-center">
            <h2 class="font-semibold text-lg text-espresso">
                <i class="fas fa-history mr-2"></i>Đơn hàng gần đây
            </h2>
            <a th:href="@{/admin/reports/orders}" class="text-coffee-600 hover:text-coffee-800 text-sm">
                Xem tất cả <i class="fas fa-arrow-right ml-1"></i>
            </a>
        </div>
        <table class="w-full">
            <thead class="bg-coffee-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-coffee-700 uppercase">Mã đơn</th>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-coffee-700 uppercase">Khách hàng</th>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-coffee-700 uppercase">Tổng tiền</th>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-coffee-700 uppercase">Trạng thái</th>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-coffee-700 uppercase">Thời gian</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-coffee-100">
                <tr th:each="order : ${recentOrders}" class="hover:bg-coffee-50">
                    <td class="px-6 py-4 font-medium" th:text="${order.orderNumber}">#ORDER</td>
                    <td class="px-6 py-4" th:text="${order.guestName ?: order.customer?.fullName ?: 'Khách'}">Guest</td>
                    <td class="px-6 py-4 font-medium" th:text="${#numbers.formatDecimal(order.totalAmount, 0, 'COMMA', 0, 'POINT')} + 'đ'">0đ</td>
                    <td class="px-6 py-4">
                        <span th:class="'px-2 py-1 rounded text-xs font-medium ' + ${order.statusBadgeClass}"
                              th:text="${order.statusDisplay}">Status</span>
                    </td>
                    <td class="px-6 py-4 text-sm text-coffee-500" th:text="${#temporals.format(order.createdAt, 'HH:mm dd/MM')}">Time</td>
                </tr>
            </tbody>
        </table>
        <div th:if="${recentOrders.isEmpty()}" class="p-8 text-center text-gray-500">
            Chưa có đơn hàng nào
        </div>
    </div>
</div>
</body>
</html>
